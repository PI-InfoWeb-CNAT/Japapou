{% extends 'base.html' %}
{% load static %}
{% block title %}
  Perfil
{% endblock %}

{% block extra_head %}
  <link rel="stylesheet" href="{% static 'css/manager/profile.css' %}" />
{% endblock %}

{% block content %}
  <h2 class="section-title">Geral</h2>

  <section>
    <div class="foto-perfil">
      <form method="post" enctype="multipart/form-data" value="{{ csrf_token }}">
        {% csrf_token %}
        <div class="foto-container">
          <label for="fileInput">
            {% if user.foto_perfil %}
              <img id="previewImage" src="{{ user.foto_perfil.url }}" alt="Foto de perfil" />
            {% else %}
              <img id="previewImage" src="{% static 'imgs/profile.png' %}" alt="Foto de perfil" />
            {% endif %}
            <div class="icone-camera">
              <i class="fa-solid fa-camera"></i>
            </div>
          </label>
          <input type="file" name="foto" id="fileInput" accept="image/*" style="display: none" />
        </div>
        <div>
          <p class="foto-label">Altere a sua foto de perfil</p>
          <button type="button" id="removeImageBtn">Remover</button>
        </div>
      </form>
    </div>
  </section>

  <section>
    <ul class="informacoes">
      <li>
        <strong>Nome</strong>
        <div class="value-with-icon">
          <span data-field="nome" data-id="{{ user.id }}" class="editable-span">{{user.nome}}</span>
          <a href="#" class="edit-icon" title="Editar"><i class="fa-solid fa-arrow-up-right-from-square"></i></a>
        </div>
      </li>
      <li>
        <strong>CPF</strong>
        <div class="value-with-icon">
          <span data-field="cpf" data-id="{{ user.id }}" class="editable-span">{{user.cpf}}</span>
          <a href="#" class="edit-icon" title="Editar"><i class="fa-solid fa-arrow-up-right-from-square"></i></a>
        </div>
      </li>
      <li>
        <strong>Anivers√°rio</strong>
        <div class="value-with-icon">
          <span data-field="data_nascimento" data-id="{{ user.id }}" class="editable-span">{{ user.data_nascimento }}</span>
          <a href="#" class="edit-icon" title="Editar"><i class="fa-solid fa-arrow-up-right-from-square"></i></a>
        </div>
      </li>
      <li>
        <strong>Telefone</strong>
        <div class="value-with-icon">
          <span data-field="telefone" data-id="{{ user.id }}" class="editable-span">{{ user.telefone }}</span>
          <a href="#" class="edit-icon" title="Editar"><i class="fa-solid fa-arrow-up-right-from-square"></i></a>
        </div>
      </li>
      <li>
        <strong>Endereco</strong>
        <div class="value-with-icon">
          <span data-field="endereco" data-id="{{ user.id }}" class="editable-span">{{ user.endereco }}</span>
          <a href="#" class="edit-icon" title="Editar"><i class="fa-solid fa-arrow-up-right-from-square"></i></a>
        </div>
      </li>
      {% if user.is_authenticated and user.tipo_usuario == 'DELIVERY_MAN' %}
        <li>
          <strong>CNH</strong>
          <div class="value-with-icon">
            <span data-field="cnh" data-id="{{ user.id }}" class="editable-span">{{ user.cnh }}</span>
            <a href="#" class="edit-icon" title="Editar"><i class="fa-solid fa-arrow-up-right-from-square"></i></a>
          </div>
        </li>
        <li>
          <strong>Modelo</strong>
          <div class="value-with-icon">
            <span data-field="modelo_moto" data-id="{{ user.id }}" class="editable-span">{{ user.modelo_moto }}</span>
            <a href="#" class="edit-icon" title="Editar"><i class="fa-solid fa-arrow-up-right-from-square"></i></a>
          </div>
        </li>
        <li>
          <strong>Cor</strong>
          <div class="value-with-icon">
            <span data-field="cor_moto" data-id="{{ user.id }}" class="editable-span">{{ user.cor_moto }}</span>
            <a href="#" class="edit-icon" title="Editar"><i class="fa-solid fa-arrow-up-right-from-square"></i></a>
          </div>
        </li>
        <li>
          <strong>Placa</strong>
          <div class="value-with-icon">
            <span data-field="Placa_moto" data-id="{{ user.id }}" class="editable-span">{{ user.Placa_moto }}</span>
            <a href="#" class="edit-icon" title="Editar"><i class="fa-solid fa-arrow-up-right-from-square"></i></a>
          </div>
        </li>
      {% endif %}
    </ul>
  </section>

  <section>
    <h2 class="section-title">Conta</h2>
    <ul class="informacoes">
      <li>
        <strong>Username</strong>
        <div class="value-with-icon">
          <span data-field="username" data-id="{{ user.id }}" class="editable-span">{{ user.username }}</span>
          <a href="#" class="edit-icon" title="Editar"><i class="fa-solid fa-arrow-up-right-from-square"></i></a>
        </div>
      </li>
      <li>
        <strong>E-mail</strong>
        <div class="value-with-icon">
          <span data-field="email" data-id="{{ user.id }}" class="editable-span">{{ user.email }}</span>
          <a href="#" class="edit-icon" title="Editar"><i class="fa-solid fa-arrow-up-right-from-square"></i></a>
        </div>
      </li>
      <li>
        <strong>Senha</strong>
        <div class="value-with-icon">
          <span>**************</span>
          <a href="#" class="edit-icon" title="Editar"><i class="fa-solid fa-arrow-up-right-from-square"></i></a>
        </div>
      </li>
    </ul>
  </section>
{% endblock %}

{% block scripts %}
  <script>
    const defaultImagePath = "{% static 'imgs/default_profile.png' %}"
  </script>
  <script src="{% static 'js/manager/manage_profile.js' %}"></script>
{% endblock %}
